<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="node_modules/three/build/three.js"></script>
    <script src="node_modules/three/examples/js/controls/OrbitControls.js"></script>
    <title>Junho's Living Area</title>
</head>
<body>
    <div id="webgl-output"></div>
    <script>
        function init() {

        //------------Scene---------------------------------------//
            var scene = new THREE.Scene();


        //------------Renderer------------------------------------//
            var renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(new THREE.Color(0x81F7F3));
            document.getElementById("webgl-output").appendChild(renderer.domElement);


        //------------Camera (initialize)-------------------------//
            var camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 1, 1000);
            camera.position.set(100, 0, 0);
            camera.lookAt(scene.position);


        //------------Camera Orbit Control (with Mouse)-----------------//
            // var controls = new THREE.OrbitControls(camera, renderer.domElement);
            // controls.rotateSpeed = 1.0;
            // controls.zoomSpeed = 1.2;
            // controls.panSpeed = 0.8;
            // controls.minDistance = 5;
            // controls.maxDistance = 100;

            // function animate() {
            //     requestAnimationFrame(animate);

            //     renderer.render(scene, camera);

            //     controls.update();
            // }

        //------------Camera Move (with KeyBoard)-----------------------//

            function cameraPosition(event) {
                requestAnimationFrame(cameraPosition);

                if (event.keyCode == 40) {
                    camera.position.x += 1.0;
                }
                if (event.keyCode == 38) {
                    camera.position.x += -1.0;
                }
                if (event.keyCode == 37) {
                    camera.position.z += 1.0;
                }
                if (event.keyCode == 39) {
                    camera.position.z += -1.0;
                }

                renderer.render(scene, camera);
            }

            function cameraLookAt(event) {
                requestAnimationFrame(cameraLookAt);

                if (event.keyCode == 65) {
                    camera.rotation.y += THREE.Math.degToRad(4);
                }
                if (event.keyCode == 68) {
                    camera.rotation.y -= THREE.Math.degToRad(4);
                }
                if (event.keyCode == 87) {
                    camera.rotation.x -= THREE.Math.degToRad(4);
                }
                if (event.keyCode == 83) {
                    camera.rotation.x += THREE.Math.degToRad(4);
                }

                renderer.render(scene, camera);
            }


            document.addEventListener("keydown", cameraPosition, false);
            document.addEventListener("keydown", cameraLookAt, false);


        //------------Window Resizing-----------------------------//
            window.addEventListener( 'resize', onWindowResize, false );

            function onWindowResize() {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();

                renderer.setSize( window.innerWidth, window.innerHeight );
            }


        //------------Temp---------------------------------------//
            var axes = new THREE.AxesHelper(20);
            scene.add(axes);
            // Red: X, Green: Y, Blue: Z

            var cubeGeometry = new THREE.BoxGeometry(5, 5, 5);
            var cubeMaterial = new THREE.MeshBasicMaterial({color:0xFF0000, wireframe:true});
            var cube = new THREE.Mesh(cubeGeometry,cubeMaterial);
            scene.add(cube);

            const solarColor = 0xFFFFFF;
            const solarintensity = 1;
            var solarLight = new THREE.AmbientLight(solarColor, solarintensity);
            scene.add(solarLight);


        //--------------Floor-------------------------------------//
            const floorWidth = 100
            const floorHeight = 100
            const floorGeometry = new THREE.PlaneGeometry(floorWidth, floorHeight);
            const floorMaterial = new THREE.MeshLambertMaterial({color: 0xF3F781});
            var floor = new THREE.Mesh(floorGeometry, floorMaterial);
            floor.rotation.x = Math.PI * -.5;
            floor.position.y = -10;
            scene.add(floor);

            
        //-------------Room1--------------------------------------//
            var room1 = new THREE.Group();

            const GlobalWallHeight = 25;


            const room1WallGeo1 = new THREE.BoxGeometry(40, GlobalWallHeight, 3);
            const room1WallGeo2 = new THREE.BoxGeometry(25, GlobalWallHeight, 3);
            const room1WallGeoEX = new THREE.BoxGeometry(15, 6, 3);
            const room1WallMat = new THREE.MeshLambertMaterial({color: 0x58FAAC});

            var room1Wall1 = new THREE.Mesh(room1WallGeo1, room1WallMat);
            room1Wall1.position.set(30, 2, 50);

            var room1Wall2 = new THREE.Mesh(room1WallGeo1, room1WallMat);
            room1Wall2.position.set(50, 2, 30);
            room1Wall2.rotation.y = .5 * Math.PI;

            var room1Wall3 = new THREE.Mesh(room1WallGeo2, room1WallMat);
            room1Wall3.position.set(37, 2, 10);

            var room1Wall4 = new THREE.Mesh(room1WallGeo1, room1WallMat);
            room1Wall4.position.set(10, 2, 30);
            room1Wall4.rotation.y = .5 * Math.PI;

            var room1WallEx = new THREE.Mesh(room1WallGeoEX, room1WallMat);
            room1WallEx.position.set(17, 11.5, 10);

            room1.add(room1Wall1);
            room1.add(room1Wall2);
            room1.add(room1Wall3);
            room1.add(room1Wall4);
            room1.add(room1WallEx);


            scene.add(room1);

            renderer.render(scene, camera);
        }   

        window.onload = init();
    </script>
</body>
</html>