<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="node_modules/three/build/three.js"></script>
    <script src="node_modules/three/examples/js/controls/OrbitControls.js"></script>
    <title>Junho's Living Area</title>
</head>
<body>
    <div id="webgl-output"></div>
    <script>
        function init() {

        //------------Scene---------------------------------------//

            var scene = new THREE.Scene();


        //------------Renderer------------------------------------//

            var renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(new THREE.Color(0x81F7F3));
            document.getElementById("webgl-output").appendChild(renderer.domElement);


        //------------Camera (initialize)-------------------------//

            var camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 1, 1000);
            camera.position.set(-30, 40, 30);   // 100 0 0
            camera.lookAt(scene.position);


        //------------Camera Orbit Control (with Mouse)-----------------//

            var controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.rotateSpeed = 1.0;
            controls.zoomSpeed = 1.2;
            controls.panSpeed = 0.8;
            controls.minDistance = 5;
            controls.maxDistance = 100;

            function animate() {
                requestAnimationFrame(animate);

                renderer.render(scene, camera);

                controls.update();
            }


        //------------Camera Control (with KeyBoard)-----------------------//

            // function cameraPosition(event) {
            //     requestAnimationFrame(cameraPosition);

            //     if (event.keyCode == 40) {
            //         camera.position.x += 1.0;
            //     }
            //     if (event.keyCode == 38) {
            //         camera.position.x += -1.0;
            //     }
            //     if (event.keyCode == 37) {
            //         camera.position.z += 1.0;
            //     }
            //     if (event.keyCode == 39) {
            //         camera.position.z += -1.0;
            //     }

            //     renderer.render(scene, camera);
            // }

            // function cameraLookAt(event) {
            //     requestAnimationFrame(cameraLookAt);

            //     if (event.keyCode == 65) {
            //         camera.rotation.y += THREE.Math.degToRad(4);
            //     }
            //     if (event.keyCode == 68) {
            //         camera.rotation.y -= THREE.Math.degToRad(4);
            //     }
            //     if (event.keyCode == 87) {
            //         camera.rotation.x -= THREE.Math.degToRad(4);
            //     }
            //     if (event.keyCode == 83) {
            //         camera.rotation.x += THREE.Math.degToRad(4);
            //     }

            //     renderer.render(scene, camera);
            // }


            // document.addEventListener("keydown", cameraPosition, false);
            // document.addEventListener("keydown", cameraLookAt, false);


        //------------Window Resizing-----------------------------//

            window.addEventListener( 'resize', onWindowResize, false );

            function onWindowResize() {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();

                renderer.setSize( window.innerWidth, window.innerHeight );
            }


        //------------Fundamentals---------------------------------------//

            var axes = new THREE.AxesHelper(20);
            scene.add(axes);
            // Red: X, Green: Y, Blue: Z

            var cubeGeometry = new THREE.BoxGeometry(5, 5, 5);
            var cubeMaterial = new THREE.MeshBasicMaterial({color:0xFF0000, wireframe:true});
            var cube = new THREE.Mesh(cubeGeometry,cubeMaterial);
            scene.add(cube);

            const skyColor = 0xB1E1FF;
            const groundColor = 0xB97A20;
            const solarintensity = 1;
            var solarLight = new THREE.HemisphereLight(skyColor, groundColor, solarintensity);
            scene.add(solarLight);

            const GlobalWallHeight = 35;

            var clock = new THREE.Clock();
            var delta = 0


        //--------------Floor-------------------------------------//

            const floorWidth = 100
            const floorHeight = 100
            const floorGeometry = new THREE.PlaneGeometry(floorWidth, floorHeight);
            const floorMaterial = new THREE.MeshLambertMaterial({color: 0xF3F781});
            var floor = new THREE.Mesh(floorGeometry, floorMaterial);
            floor.rotation.x = Math.PI * -.5;
            floor.position.y = -10;
            scene.add(floor);

            
        //-------------Edges--------------------------------------//
        
            const edgeGeometry1 = new THREE.PlaneGeometry(43, GlobalWallHeight);
            const edgeGeometry2 = new THREE.PlaneGeometry(60, GlobalWallHeight);
            const edgeMaterial = new THREE.MeshPhongMaterial({color:0xFFFFFF, side: 2});

            var edge1 = new THREE.Mesh(edgeGeometry1, edgeMaterial);
            var edge2 = new THREE.Mesh(edgeGeometry2, edgeMaterial);
            edge1.position.set(50, 7, -28.5);
            edge2.position.set(20, 7, -50);
            edge1.rotation.y = .5 * Math.PI;

            var edges = new THREE.Group();
            edges.add(edge1);
            edges.add(edge2);

            scene.add(edges);

            
        //-------------Room1--------------------------------------//

            var room1 = new THREE.Group();


        // ------------Room1 - Walls -----------------------------//

            const room1WallGeo1 = new THREE.BoxGeometry(40, GlobalWallHeight, 3);
            const room1WallGeo2 = new THREE.BoxGeometry(25, GlobalWallHeight, 3);
            const room1WallGeoEX = new THREE.BoxGeometry(15, 6, 3);
            const room1WallMat = new THREE.MeshLambertMaterial({color: 0x58FAAC});

            var room1Wall1 = new THREE.Mesh(room1WallGeo1, room1WallMat);
            room1Wall1.position.set(30, 2, 50);

            var room1Wall2 = new THREE.Mesh(room1WallGeo1, room1WallMat);
            room1Wall2.position.set(50, 2, 30);
            room1Wall2.rotation.y = .5 * Math.PI;

            var room1Wall3 = new THREE.Mesh(room1WallGeo2, room1WallMat);
            room1Wall3.position.set(37, 2, 10);

            var room1Wall4 = new THREE.Mesh(room1WallGeo1, room1WallMat);
            room1Wall4.position.set(10, 2, 30);
            room1Wall4.rotation.y = .5 * Math.PI;

            var room1WallEx = new THREE.Mesh(room1WallGeoEX, room1WallMat);
            room1WallEx.position.set(17, 16.5, 10);

            var room1Walls = new THREE.Group();
            room1Walls.position.y = 5;

            room1Walls.add(room1Wall1);
            room1Walls.add(room1Wall2);
            room1Walls.add(room1Wall3);
            room1Walls.add(room1Wall4);
            room1Walls.add(room1WallEx);

            room1.add(room1Walls);


        //--------------Room1 - Door----------------------------------//

            const doorGeo = new THREE.BoxGeometry(15, 28, 1.5);
            const doorMat = new THREE.MeshLambertMaterial({color: 0x3ADF00});
            var room1Door = new THREE.Mesh(doorGeo, doorMat);
            room1Door.rotation.y = Math.PI / -2.8;
            room1Door.position.set(15, 4, 17);

            const doorknGeo = new THREE.CylinderGeometry(0.5, 0.5, 2.8, 20);
            const doorknMat = new THREE.MeshPhongMaterial({color: 0xE6E6E6});
            var room1doorkn = new THREE.Mesh(doorknGeo, doorknMat);
            room1doorkn.position.set(6, 0, 0);
            room1doorkn.rotation.x = Math.PI / 2;
            room1Door.add(room1doorkn);

            room1.add(room1Door);


        //--------------Room1 - Bed-----------------------------------//

            const bedGeo = new THREE.BoxGeometry(30, 5, 15);
            const bedMat = new THREE.MeshPhongMaterial({color:0xFFFFFF});
            var bed = new THREE.Mesh(bedGeo, bedMat);
            bed.position.set(32, -5, 41);

            const bedLegGeo = new THREE.BoxGeometry(2, 5, 2);
            const bedLegMat = new THREE.MeshPhongMaterial({color:0xB40404});
            var leg1 = new THREE.Mesh(bedLegGeo, bedLegMat);
            var leg2 = new THREE.Mesh(bedLegGeo, bedLegMat);
            var leg3 = new THREE.Mesh(bedLegGeo, bedLegMat);
            var leg4 = new THREE.Mesh(bedLegGeo, bedLegMat);
            leg1.position.set(15, -3, 7.5);
            leg2.position.set(15, -3, -7.5);
            leg3.position.set(-15, -3, 7.5);
            leg4.position.set(-15, -3, -7.5);
            bed.add(leg1);
            bed.add(leg2);
            bed.add(leg3);
            bed.add(leg4);


        //-----------------Room1 - Bed - Pillow------------------------//

            const pillowGeo = new THREE.BoxGeometry(3, 0.5, 6.5);
            const pillowMat = new THREE.MeshPhongMaterial({color:0xBDBDBD});
            var pillow = new THREE.Mesh(pillowGeo, pillowMat);
            pillow.position.set(12, 3, 0);
            bed.add(pillow);


        //-----------------Room1 - Bed - Blanket-----------------------//

            const blanketGeo = new THREE.PlaneGeometry(24, 15);
            const blanketMat = new THREE.MeshBasicMaterial({color:0xFE9A2E});
            var blanket = new THREE.Mesh(blanketGeo, blanketMat);
            blanket.position.set(-3, 2.6, 0);
            blanket.rotation.x = -.5 * Math.PI;
            bed.add(blanket);


            room1.add(bed);


        //---------------Room1 - Desk--------------------------------//

            const deskGeo = new THREE.BoxGeometry(14, 2, 24);
            const deskLegGeo = new THREE.BoxGeometry(2, 14, 2);
            const deskDrawerGeo = new THREE.BoxGeometry(14, 14, 6);
            const deskMat = new THREE.MeshPhongMaterial({color:0x868A08});
            var desk = new THREE.Mesh(deskGeo, deskMat);
            var deskLeg1 = new THREE.Mesh(deskLegGeo, deskMat);
            var deskLeg2 = new THREE.Mesh(deskLegGeo, deskMat);
            var deskDrawer = new THREE.Mesh(deskDrawerGeo, deskMat);
            desk.position.set(43, 3, 22);
            deskLeg1.position.set(6, -7, -9);
            deskLeg2.position.set(-6, -7, -9);
            deskDrawer.position.set(0, -7, 8);
            desk.add(deskLeg1);
            desk.add(deskLeg2);
            desk.add(deskDrawer);


        //---------------Room1 - Desk - Lamp-------------------------//

            const lampCylinGeo = new THREE.CylinderGeometry(1, 1, 5, 12);
            const lampCylinMat = new THREE.MeshPhongMaterial({color:0xF5A9A9});
            var lampCylin = new THREE.Mesh(lampCylinGeo, lampCylinMat);
            lampCylin.position.y = 4
            lampCylin.position.z = -4
            desk.add(lampCylin);
            
            const lampBottomGeo = new THREE.CylinderGeometry(2, 2, 1, 24);;
            var lampBottom = new THREE.Mesh(lampBottomGeo, lampCylinMat);
            lampBottom.position.y = -3
            lampCylin.add(lampBottom);

            const points = [];
            for (let i = 0; i < 4; ++i) {
                points.push(new THREE.Vector2(Math.sin(i * 0.2) * 3 + 3, (i - 5) * .8));
            }
            const lampCoverGeo = new THREE.LatheGeometry(points, 26);
            const lampCoverMat = new THREE.MeshLambertMaterial({color:0xF5F6CE, opacity:0.9, transparent: true, side: 2});
            var lampCover = new THREE.Mesh(lampCoverGeo, lampCoverMat);
            lampCover.rotation.z = Math.PI;
            lampCylin.add(lampCover);

            const lampBulbGeo = new THREE.SphereGeometry(1.3, 26, 26);
            const lampBulbMat = new THREE.MeshBasicMaterial({color:0xFFFFEE});
            var lampBulb = new THREE.Mesh(lampBulbGeo, lampBulbMat);
            lampBulb.position.y = 2.5;
            lampCylin.add(lampBulb);

            var lampLight = new THREE.SpotLight(0xFFFFFF, 1, 180, Math.PI);
            lampBulb.add(lampLight);
        

        //---------------Room1 - Desk - Laptop----------------------//

            


            room1.add(desk);


            scene.add(room1);

        //---------------Room2--------------------------------------//

            var room2 = new THREE.Group();


        //---------------Room2 - Walls------------------------------//

            const room2WallGeo1 = new THREE.BoxGeometry(65, GlobalWallHeight, 3);
            const room2WallGeo2= new THREE.BoxGeometry(40, GlobalWallHeight, 3);
            const room2WallGeo3 = new THREE.BoxGeometry(30, GlobalWallHeight, 3);
            const room2WallGeo4 = new THREE.BoxGeometry(10, GlobalWallHeight, 3);
            const room2WallGeoEX = new THREE.BoxGeometry(25, 6, 3);
            const room2WallMat = new THREE.MeshLambertMaterial({color:0xF6CECE});

            var room2Wall1 = new THREE.Mesh(room2WallGeo1, room2WallMat);
            var room2Wall2 = new THREE.Mesh(room2WallGeo2, room2WallMat);
            var room2Wall3 = new THREE.Mesh(room2WallGeo3, room2WallMat);
            var room2Wall4 = new THREE.Mesh(room2WallGeo4, room2WallMat);
            var room2Wall5 = new THREE.Mesh(room2WallGeo2, room2WallMat);
            var room2WallEX = new THREE.Mesh(room2WallGeoEX, room2WallMat);

            room2Wall1.position.set(-50, 7, -17.5);
            room2Wall1.rotation.y = .5 * Math.PI;
            room2Wall2.position.set(-30, 7, 15);
            room2Wall3.position.set(-10, 7, 0)
            room2Wall3.rotation.y = .5 * Math.PI;
            room2Wall4.position.set(-10, 7, -45);
            room2Wall4.rotation.y = .5 * Math.PI;
            room2Wall5.position.set(-30, 7, -50);
            room2WallEX.position.set(-10, 21.5, -27.5);
            room2WallEX.rotation.y = .5 * Math.PI;

            var room2Walls = new THREE.Group();
            room2Walls.add(room2Wall1);
            room2Walls.add(room2Wall2);
            room2Walls.add(room2Wall3);
            room2Walls.add(room2Wall4);
            room2Walls.add(room2Wall5);
            room2Walls.add(room2WallEX);

            room2.add(room2Walls);

            scene.add(room2);


        //-------------Room2 - Tower-------------------//
            

        //-------------LivingRoom - Sofa---------------//
        
        
        //-------------LivingRoom - Wall light---------//


        //-------------Cat-----------------------------//
            
            var cat = new THREE.Group();

            const catHeadGeo = new THREE.DodecahedronGeometry(2, 2);
            const catBodyGeo = new THREE.BoxGeometry(3, 3, 7);
            class CustomSinCurve extends THREE.Curve {
                constructor(scale) {
                    super();
                    this.scale = scale;
                }
                getPoint(t) {
                    const tx = t * 3 - 1.5;
                    const ty = Math.sin(2 * Math.PI * t);
                    const tz = 0;
                    return new THREE.Vector3(tx, ty, tz).multiplyScalar(this.scale);
                }
            }
            const path = new CustomSinCurve(2);
            const tubularSegments = 20;  
            const radius = 1;  
            const radialSegments = 8;  
            const closed = false;  
            const catTailGeo = new THREE.TubeGeometry(
                path, tubularSegments, radius, radialSegments, closed);
            const catLegGeo = new THREE.BoxGeometry(0.5, 3, 0.5);
            const catEarGeo = new THREE.ConeGeometry(1, 1.5, 50);
            const catNoseGeo = new THREE.DodecahedronGeometry(0.5, 3);
            const catMaterial = new THREE.MeshLambertMaterial({color:0x2E2E2E, side: 2});
            const catNoseMaterial = new THREE.MeshPhongMaterial({color:0xFF0000});

            var catHead = new THREE.Mesh(catHeadGeo, catMaterial);
            var catBody = new THREE.Mesh(catBodyGeo, catMaterial);
            var catTail = new THREE.Mesh(catTailGeo, catMaterial);
            var catLeg1 = new THREE.Mesh(catLegGeo, catMaterial);
            var catLeg2= new THREE.Mesh(catLegGeo, catMaterial);
            var catLeg3 = new THREE.Mesh(catLegGeo, catMaterial);
            var catLeg4 = new THREE.Mesh(catLegGeo, catMaterial);
            var catEar1 = new THREE.Mesh(catEarGeo, catMaterial);
            var catEar2 = new THREE.Mesh(catEarGeo, catMaterial);
            var catNose = new THREE.Mesh(catNoseGeo, catNoseMaterial);

            catBody.add(catHead);
            catBody.add(catTail);
            catBody.add(catLeg1);
            catBody.add(catLeg2);
            catBody.add(catLeg3);
            catBody.add(catLeg4);
            catHead.add(catEar1);
            catHead.add(catEar2);
            catHead.add(catNose);

            cat.position.set(10, 0, -25);

            catBody.rotation.y = Math.PI * .5;
            catHead.position.set(4, 2, 0);
            catTail.rotation.y = Math.PI * -.5;
            catTail.rotation.z = Math.PI / -4;
            catTail.position.set(0, 3, -4);
            catLeg1.position.set(1, -2.7, -3.3);
            catLeg2.position.set(-1, -2.7, -3.3);
            catLeg3.position.set(1, -2.7, 3.3);
            catLeg4.position.set(-1, -2.7, 3.3);
            catEar1.position.set(0, 2, 1);
            catEar1.rotation.x = Math.PI / 6;
            catEar2.position.set(0, 2, -1);
            catEar2.rotation.x = Math.PI / -6;
            catNose.position.set(1.4, -0.8, 0);
            
            cat.position.y = -6;

            cat.add(catBody);
            cat.add(catHead);

            scene.add(cat);
            
            delta = clock.getDelta();
            
            function catAnimation(delta) {
                requestAnimationFrame(catAnimation);
                cat.position.x += Math.sin(delta * Math.PI / 200);
                cat.rotation.y += Math.PI / 20;
                renderer.render(scene, camera);
            }

            animate();
            catAnimation(delta);
        }   

        window.onload = init();
    </script>
</body>
</html>